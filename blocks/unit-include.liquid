<div id="variantAdditionalInfoWrapper-{{ section.id }}">
  {%- assign init_variant = product.selected_or_first_available_variant -%}
  <div id="variantAdditionalInfo-{{ section.id }}">
    {{ init_variant.metafields.custom.unit_include }}
  </div>
</div>

<script>
console.log("hi");

document.addEventListener("DOMContentLoaded", () => {
  // Select all quantity selectors on the page
  const quantitySelectors = document.querySelectorAll(".quantity-selector");

  if (!quantitySelectors.length) {
    console.warn("No quantity selectors found on this page.");
    return;
  }

  quantitySelectors.forEach(selector => {
    const quantityInput = selector.querySelector("input[name='quantity']");
    const minusBtn = selector.querySelector("button[name='minus']");
    const plusBtn = selector.querySelector("button[name='plus']");

    // Safety check (skip this selector if input is missing)
    if (!quantityInput) return;

    function logQuantity() {
      console.log("Quantity:", quantityInput.value);
    }

    // Attach event listeners safely
    if (minusBtn) {
      minusBtn.addEventListener("click", () => {
        console.log("Minus clicked");
        logQuantity();
      });
    }

    if (plusBtn) {
      plusBtn.addEventListener("click", () => {
        console.log("Plus clicked");
        logQuantity();
      });
    }

    // Listen for manual typing
    quantityInput.addEventListener("input", logQuantity);
  });
});
</script>

{% schema %}
{
  "name": "Unit Include",
  "settings": [],
  "presets": [
    {
      "category": "Custom Block",
      "name": "Unit Include"
    }
  ]
}
{% endschema %}
